<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.studyboot.sms.dao.ScheduleDao">

  <resultMap type="schedule" id="scheduleMap">
    <id column="std_schdl_id" property="id" />
    <result column="std_id" property="studyNo" />
    <result column="member_id" property="memberNo" />
    <result column="space_bkng_id" property="spaceBookingNo" />
    <result column="name" property="title" />
    <result column="schdl_sdt" property="start" />
    <result column="schdl_edt" property="end" />
    <result column="memo" property="memo" />
  </resultMap>

  <insert id="insert" parameterType="schedule">
    insert into sms_std_schdl(
      name,
      std_id,
      member_id,
      schdl_sdt,
      schdl_edt,
      memo)
    values(
      #{title},
      #{studyNo},
      #{memberNo},
      #{start},
      #{end},
      #{memo})
  </insert>

  <select id="findAll" resultMap="scheduleMap" parameterType="int">
    select
      std_schdl_id,
      std_id,
      member_id,
      space_bkng_id,
      name,
      schdl_sdt,
      schdl_edt,
      memo
    from
      sms_std_schdl
    where std_id = #{value}
      
  </select>

  <select id="findByNo" resultMap="scheduleMap" parameterType="int">
    select
      std_schdl_id,
      std_id,
      member_id,
      space_bkng_id,
      name,
      schdl_sdt,
      schdl_edt,
      memo
    from
      sms_std_schdl
    where
      std_schdl_id = #{value}
  </select>
  
  <delete id="delete" parameterType="int">
    delete from
      sms_std_schdl
    where 
      std_schdl_id = #{value}
  </delete>
  
  <update id="update" parameterType="study">
    update 
      sms_std_schdl
    set
      name = #{title},
      schdl_sdt = #{start},
      schdl_edt = #{end},
      memo = #{memo}
    where std_schdl_id = #{id}
  </update>
  
</mapper>
